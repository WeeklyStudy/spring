# #13 @RequestParam, @ModelAttribute, @RequestBodyμ μ°¨μ΄λ”?

## 1. HTTP μ”μ²­μΌλ΅ λ°μ΄ν„° μ „λ‹¬ λ°©λ²•

### 1.1 GET-μΏΌλ¦¬νλΌλ―Έν„° λ°©λ²•

URLμ μΏΌλ¦¬ νλΌλ―Έν„°μ— λ°μ΄ν„°λ¥Ό μ „λ‹¬ν•λ” λ°©μ‹

- HTTP μ”μ²­ λ©”μ‹μ§€ ν—¤λ”μ νλΌλ―Έν„°μ— λ°μ΄ν„°λ¥Ό μ „λ‹¬
- κ²€μƒ‰, ν•„ν„°, νμ΄μ§• λ“±μ—μ„ λ§μ΄ μ‚¬μ©
- ν΄λΌμ΄μ–ΈνΈμ—κ² μ§μ ‘μ μΌλ΅ λ…Έμ¶μ΄ λκΈ° λ•λ¬Έμ— λ―Όκ°ν• μ •λ³΄λ” μ μ™Έν•΄μ•Όν•¨

```jsx
/url?username=kim&age=20
```

### 1.2 POST - HTML Form

HTMLμ Formμ„ ν™μ©ν•μ—¬ μ„λ²„λ΅ λ°μ΄ν„°λ¥Ό μ „μ†΅ν•λ” λ°©μ‹

- λ©”μ‹μ§€ λ°”λ””μ— μΏΌλ¦¬ νλ¦¬λ―Έν„° ν•μ‹μΌλ΅ μ „λ‹¬
- λ©”μ„Έμ§€ λ°”λ””μ λ―Έλ””μ–΄ ν•μ‹μ„ λ‚νƒ€λ‚΄λ” content-typeλ¥Ό κ°€μ§
    
    β‡’ content-type: application/x-www-form-urlencoded
    
- νμ› κ°€μ…, μƒν’ μ£Όλ¬Έ, HTML Form μ‚¬μ©

### 1.3 HTTP Request Message Body

HTTP μ”μ²­ λ©”μ‹μ§€μ Bodyμ— λ°μ΄ν„°λ¥Ό λ‹΄μ•„ μ „λ‹¬ν•λ” λ°©μ‹

- HTTP message bodyμ— λ°μ΄ν„°λ¥Ό μ§μ ‘ λ‹΄μ•„μ„ μ”μ²­
- μ£Όλ΅ `JSON`, `XML`, `TEXT` ν•μ‹μ λ°μ΄ν„°λ¥Ό μμ£Ό μ‚¬μ©ν•λ‹¤.
    
    β‡’ μ‚¬μ‹¤μƒ JSONμ΄ ν‘μ¤€μ΄ λμ—μ
    

## 2. @RequestParam, @ModelAttribute, @RequestBody μ–΄λ…Έν…μ΄μ…μ μ°¨μ΄

μ¤ν”„λ§ ν”„λ μ„μ›ν¬μ—μ„ μ‚¬μ©λλ” μ–΄λ…Έν…μ΄μ…μΌλ΅, κ°κ° λ‹¤λ¥Έ μ—­ν• μ„ μν–‰

- @RequestParam, @ModelAttribute - HTTP μ”μ²­ νλΌλ―Έν„° μ •λ³΄λ¥Ό λ§¤ν•‘
- @RequestBody - HTTP μ”μ²­ λ°”λ””μ μ •λ³΄λ¥Ό λ§¤ν•‘

### 2.1 @RequestParam

- HTTP μ”μ²­ λ©”μ„Έμ§€ νλΌλ―Έν„°λ¥Ό λ§¤κ°λ³€μλ΅ λ§¤ν•‘ν•  λ• μ‚¬μ©
- μΏΌλ¦¬ λ¬Έμμ—΄μ΄λ‚ νΌ λ°μ΄ν„°μ—μ„ νΉμ •ν• νλΌλ―Έν„° κ°’μ„ μ¶”μ¶ν•  λ• μ‚¬μ©
- κΈ°λ³Έμ μΌλ΅ ν•„μ νλΌλ―Έν„°λ΅ κ°„μ£Όλλ©°(required=true), ν•„μκ°€ μ•„λ‹ κ²½μ° **`required`** μ†μ„±μ„ **`false`**λ΅ μ„¤μ • κ°€λ¥
- λ‹¨μΌ κ°’ λλ” μ—¬λ¬ κ°’λ“¤μ„ λ°›μ„ μ μμ

```java
@GetMapping("/example")
public String example(@RequestParam String param) {
    // ...
}
```

### 2.2 @ModelAttribute

- μ”μ²­ νλΌλ―Έν„°λ‚ HTTP μ„Έμ… λ“±μ—μ„ λ°μ΄ν„°λ¥Ό λ°”μΈλ”©ν•μ—¬ λ¨λΈ κ°μ²΄λ¥Ό μƒμ„±
- μ£Όλ΅ HTML νΌ λ°μ΄ν„°λ¥Ό κ°μ²΄μ— λ§¤ν•‘ν•  λ• μ‚¬μ©
- λ¨λΈ **κ°μ²΄μ ν•„λ“λ” μ”μ²­ νλΌλ―Έν„° μ΄λ¦„κ³Ό μΌμΉ**ν•΄μ•Ό ν•¨
    
    β‡’ νλΌλ―Έν„°μ΄λ¦„μ„ ν†µν•΄ setter λ©”μ„λ“ νΈμ¶
    

```java
@PostMapping("/submitForm")
public String submitForm(@ModelAttribute User user) {
    // ...
}
```

### 2.3 @RequestBody

- HTTP μ”μ²­μ λ°”λ””μ λ°μ΄ν„°λ¥Ό μλ°” κ°μ²΄λ΅ λ§¤ν•‘ν•  λ• μ‚¬μ©
- JSON, XML, TEXT λ“± ν•μ‹μ λ°μ΄ν„°λ¥Ό μλ°” κ°μ²΄λ΅ λ³€ν™
- POST λλ” PUT λ©”μ„λ“μ™€ ν•¨κ» μ‚¬μ©λλ©° RESTful APIμ—μ„ μμ£Ό μ‚¬μ©
- μ£Όλ΅ **`application/json`** **`application/xml`**κ³Ό κ°™μ€ λ―Έλ””μ–΄ νƒ€μ…κ³Ό ν•¨κ» μ‚¬μ©

π’΅HttpMessageConverter κ°€ μ”μ²­ λ°”λ””μ λ°μ΄ν„°λ¥Ό λ€μƒν΄λμ¤νƒ€μ…κ³Ό λ―Έλ””μ–΄ νƒ€μ… ν™•μΈν•μ—¬ λ³€ν™ν•΄μ¤

## 3. μ •λ¦¬
- HTTP μ”μ²­μΌλ΅ λ°μ΄ν„° μ „λ‹¬ λ°©λ²•μΌλ΅ GET-μΏΌλ¦¬νλΌλ―Έν„°, POST-HTML Form, HTTP Request Message Body λ°©λ²•μ΄ μλ‹¤.
- **`@RequestParam`**: URL μΏΌλ¦¬ λ¬Έμμ—΄μ΄λ‚ νΌ λ°μ΄ν„°μ—μ„ νλΌλ―Έν„°λ¥Ό μ¶”μ¶ν•©λ‹λ‹¤.
- **`@ModelAttribute`**: μ”μ²­ νλΌλ―Έν„°λ‚ λ‹¤λ¥Έ μ†μ¤μ λ°μ΄ν„°λ¥Ό κ°μ²΄μ— λ°”μΈλ”©ν•κ³  λ¨λΈμ— μ¶”κ°€ν•μ—¬ λ·°λ΅ μ „λ‹¬ν•©λ‹λ‹¤.
- **`@RequestBody`**: HTTP μ”μ²­μ λ³Έλ¬Έ(body)μ„ μλ°” κ°μ²΄λ΅ λ³€ν™ν•μ—¬ λ©”μ„λ“μ νλΌλ―Έν„°λ΅ μ „λ‹¬ν•©λ‹λ‹¤.

</br>

# #14 ResponseEntityμ™€ @ResponseBodyμ μ°¨μ΄μ μ€ λ¬΄μ—‡μΈκ°€?
### 1.1 **ResponseEntity**

HTTP μ‘λ‹µμ μƒνƒμ½”λ“, ν—¤λ”, λ³Έλ¬Έ(body) λ“±μ„ ν¬κ΄„μ μΌλ΅ λ‹¤λ£° μ μλ” λ°©μ‹μ…λ‹λ‹¤.

- **λ™μ‘**
    - **`ResponseEntity`**λ” HTTP μ‘λ‹µμ λ¨λ“  μΈ΅λ©΄μ„ ν‘ν„ν•λ” ν΄λμ¤
    - λ©”μ„λ“μ λ°ν™ νƒ€μ…μΌλ΅ μ‚¬μ©λλ©°, μ‘λ‹µμ μƒνƒμ½”λ“, ν—¤λ”, λ³Έλ¬Έ λ“±μ„ μ„¤μ • κ°€λ¥

```java
javaCopy code
@GetMapping("/example")
public ResponseEntity<String> example() {
    HttpHeaders headers = new HttpHeaders();
    headers.add("Custom-Header", "foo");

    return new ResponseEntity<>("Hello, World!", headers, HttpStatus.OK);
}

```

### 1.2 ResponseBody

λ©”μ„λ“κ°€ λ°ν™ν•λ” κ°’μ„ HTTP μ‘λ‹µμ λ³Έλ¬Έ(body)μΌλ΅ μ§μ ‘ μ‚¬μ©ν•λ” λ°©μ‹

- **λ™μ‘**
    - **`@ResponseBody`** μ–΄λ…Έν…μ΄μ…μ„ λ©”μ„λ“μ— μ μ©ν•λ©΄ ν•΄λ‹Ή λ©”μ„λ“μ λ°ν™κ°’μ΄ HTTP μ‘λ‹µμ λ³Έλ¬ΈμΌλ΅ μ‚¬μ©
    - κ°μ²΄λ¥Ό λ°ν™ν•λ©΄ μλ™μΌλ΅ κ°μ²΄λ¥Ό λ³€ν™ν•μ—¬ ν΄λΌμ΄μ–ΈνΈμ— μ „λ‹¬
- **μμ‹:**
    
    ```java
    javaCopy code
    @GetMapping("/example")
    @ResponseBody
    public String example() {
        return "Hello, World!";
    }
    ```
    

## 2. μ •λ¦¬

- **`ResponseEntity`**: HTTP μ‘λ‹µμ μƒνƒμ½”λ“, ν—¤λ”, λ³Έλ¬Έ λ“±μ„ ν‘ν„ν•λ” ν΄λμ¤λ΅, ν¬κ΄„μ μΈ μ„¤μ •μ΄ κ°€λ¥
- **`@ResponseBody`**: λ©”μ„λ“κ°€ λ°ν™ν•λ” κ°’μ„ HTTP μ‘λ‹µμ λ³Έλ¬ΈμΌλ΅ μ‚¬μ©ν•λ©°, λ©”μ„λ“μ— μ§μ ‘ μ μ©ν•μ—¬ μ‚¬μ©

</br>

# #15 HttpMessageConverter μ—­ν• μ€ λ¬΄μ—‡μΈκ°€?
## 1. HttpMessageConterλ€?

> μ¤ν”„λ§μ—μ„ HTTP μ”μ²­κ³Ό μ‘λ‹µμ λ°μ΄ν„° λ³€ν™μ„ μ²λ¦¬ν•λ” μΈν„°νμ΄μ¤  
> λ―Έλ””μ–΄ νƒ€μ… β†” μλ°” κ°μ²΄ λ³€ν™ μν–‰

### 1.1 μ—­ν• 

- λ°μ΄ν„° λ³€ν™
    - HTTP **μ”μ²­** λ°”λ””μ **λ°μ΄ν„°λ¥Ό** μ½μ–΄ **μλ°” κ°μ²΄λ΅** λ³€ν™ (read μ‘μ—…)
        
        ex) `JSON λλ” XML` β†’ `μλ°” κ°μ²΄`
        
    - **μλ°”** κ°μ²΄, **λ°μ΄ν„°λ¥Ό** μ μ ν• ν•μ‹μ **HTTP μ‘λ‹µ λ°μ΄ν„°λ΅** λ³€ν™(write μ‘μ—…)
        
        ex) `μλ°”κ°μ²΄` β†’ `JSON λλ” XML`
        
- λ―Έλ””μ–΄ νƒ€μ… μ§€μ›
    - HTTP μ”μ²­ λ‚΄λ¶€μ ν΄λΌμ΄μ–ΈνΈ μ”μ²­ λ―Έλ””μ–΄νƒ€μ…(Content-Type) κ³Ό μ„λ²„ μ‘λ‹µ λ―Έλ””μ–΄νƒ€μ…(Accept)μ„ ν™•μΈν•μ—¬ μ²λ¦¬
    - μ–΄λ–¤ ν•μ‹μ λ°μ΄ν„°λ¥Ό μ”μ²­ν•κ³  μ‘λ‹µν•λ”μ§€ κ²°μ •ν•λ” μ—­ν• 
- λ‹¤μ–‘ν• λ°μ΄ν„° ν•μ‹ μ§€μ› λ° μ²λ¦¬
    - JSON, XML, HTML, ν…μ¤νΈ λ“± λ‹¤μ–‘ν• ν•μ‹ μ§€μ›ν•λ©° λ°μ΄ν„° ν•μ‹μ— λ”°λΌ HttpMessageConverter μ„ νƒ μ²λ¦¬

### 1.2 μΆ…λ¥

λ―Έλ””μ–΄ νƒ€μ…κ³Ό λ°μ΄ν„° ν•μ‹μ— λ”°λΌ λ‹¤μ–‘ν• μΆ…λ¥μ MessageConverter μ΅΄μ¬

1. **`ByteArrayHttpMessageConverter`**
    - **`application/octet-stream`** λ―Έλ””μ–΄ νƒ€μ…μ λ°μ΄ν„°λ¥Ό μ²λ¦¬ν•λ”λ° μ‚¬μ©
    - μ£Όλ΅ νμΌ μ—…λ΅λ“ λ° λ‹¤μ΄λ΅λ“μ™€ κ΄€λ ¨λ μ‘μ—…μ—μ„ ν™μ©
2. **`StringHttpMessageConverter`**
    - ν…μ¤νΈ λ°μ΄ν„°λ¥Ό μ²λ¦¬ν•λ”λ° μ‚¬μ©
    - μ£Όλ΅ **`text/plain`**, **`text/html`**, **`application/json`**, **`application/xml`** λ“±κ³Ό κ°™μ€ λ―Έλ””μ–΄ νƒ€μ…μ λ°μ΄ν„°λ¥Ό μ²λ¦¬
3. **`FormHttpMessageConverter`**
    - **`application/x-www-form-urlencoded`** λ―Έλ””μ–΄ νƒ€μ…μ λ°μ΄ν„°λ¥Ό μ²λ¦¬ν•λ”λ° μ‚¬μ©
    - μ£Όλ΅ HTML νΌ λ°μ΄ν„°μ™€ κ΄€λ ¨λ μ‘μ—…μ—μ„ ν™μ©
4. **`MappingJackson2HttpMessageConverter`**
    - JSON ν•μ‹μ λ°μ΄ν„°λ¥Ό μ²λ¦¬ν•λ”λ° μ‚¬μ©
    - **Jackson λΌμ΄λΈλ¬λ¦¬λ¥Ό κΈ°λ°**μΌλ΅ ν•λ©°, μλ°” κ°μ²΄λ¥Ό JSONμΌλ΅ λ³€ν™ν•κ±°λ‚ JSONμ„ μλ°” κ°μ²΄λ΅ λ³€ν™ν•λ” μ‘μ—…μ—μ„ μ£Όλ΅ μ‚¬μ©
5. **`MappingJackson2XmlHttpMessageConverter`**
    - XML ν•μ‹μ λ°μ΄ν„°λ¥Ό μ²λ¦¬ν•λ”λ° μ‚¬μ©
    - **Jackson λΌμ΄λΈλ¬λ¦¬λ¥Ό κΈ°λ°**μΌλ΅ ν•λ©°, μλ°” κ°μ²΄λ¥Ό XMLλ΅ λ³€ν™ν•κ±°λ‚ XMLμ„ μλ°” κ°μ²΄λ΅ λ³€ν™ν•λ” μ‘μ—…μ—μ„ μ£Όλ΅ μ‚¬μ©
6. **`Jaxb2RootElementHttpMessageConverter`**
    - JAXBλ¥Ό μ‚¬μ©ν•μ—¬ XMLμ„ μ²λ¦¬ν•λ”λ° μ‚¬μ©
    - μλ°” κ°μ²΄λ¥Ό XMLλ΅ λ³€ν™ν•κ±°λ‚ XMLμ„ μλ°” κ°μ²΄λ΅ λ³€ν™ν•λ” μ‘μ—…μ—μ„ μ£Όλ΅ μ‚¬μ©λ©λ‹λ‹¤.
    
    π’΅JAXB(Java Architecture for XML Binding) :
    
    μλ°” ν”„λ΅κ·Έλλ° μ–Έμ–΄ μ• ν”λ¦¬μΌ€μ΄μ…μ—μ„ XML μ»¨ν…μΈ μ μ‚¬μ©μ„ κ°„μ†ν™”ν•΄μ£Όλ” κΈ°μ 
    
7. **`BufferedImageHttpMessageConverter`**
    - μ΄λ―Έμ§€ λ°μ΄ν„°λ¥Ό μ²λ¦¬ν•λ”λ° μ‚¬μ©
    - **`image/jpeg`**, **`image/png`** λ“±κ³Ό κ°™μ€ μ΄λ―Έμ§€ λ―Έλ””μ–΄ νƒ€μ…μ λ°μ΄ν„°λ¥Ό μ²λ¦¬
8. **`ResourceHttpMessageConverter`**
    - **`org.springframework.core.io.Resource`** νƒ€μ…μ λ°μ΄ν„°λ¥Ό μ²λ¦¬ν•λ”λ° μ‚¬μ©
    - νμΌ λ‹¤μ΄λ΅λ“μ™€ κ΄€λ ¨λ μ‘μ—…μ—μ„ ν™μ©

π’΅ λ§μ΄ μ‚¬μ©λλ” κµ¬ν„μ²΄  
  **`ByteArrayHttpMessageConverter`,** **`StringHttpMessageConverter`, `MappingJackson2HttpMessageConverter`, `MappingJackson2XmlHttpMessageConverter`**  

## 2. λ™μ‘ λ°©λ²•

### 2.1 HTTP μ”μ²­ μ²λ¦¬

ν΄λΌμ΄μ–ΈνΈκ°€ λ³΄λ‚Έ HTTP μ”μ²­ λ©”μ‹μ§€μ λ°μ΄ν„°λ¥Ό μ½μ–΄ λ³€ν™ν•λ” κ³Όμ •

- κ³Όμ •
    1. @RequestBody λλ” HttpEntity νλΌλ―Έν„°λ¥Ό μ‚¬μ©
    2. λ©”μ‹μ§€ μ»¨λ²„ν„°κ°€ μ½μ„ μ μλ”μ§€ ν™•μΈμ„ μ„ν•΄ `canRead()`λ¥Ό νΈμ¶
        - λ€μƒ ν΄λμ¤ νƒ€μ…, HTTP μ”μ²­ Content-Type λ―Έλ””μ–΄ νƒ€μ… μ§€μ› μ—¬λ¶€ ν™•μΈ
    3. `read()` νΈμ¶ν•μ—¬ HTTP μ”μ²­ λ°”λ””λ¥Ό λ³€ν™

### 2.2 HTTP μ‘λ‹µ λ°μ΄ν„° μ½κΈ°

- κ³Όμ •
    1. @ReponseBody λλ” HttpEntityλ΅ κ°’μ΄ λ°ν™
    2. λ©”μ‹μ§€ μ»¨λ²„ν„°κ°€ λ©”μ‹μ§€λ¥Ό μ“Έ μ μλ”μ§€ ν™•μΈν•κΈ° μ„ν•΄μ„ `canWrite()`λ¥Ό νΈμ¶
        - λ€μƒ ν΄λμ¤ νƒ€μ…, HTTP μ”μ²­ Accept λ―Έλ””μ–΄ νƒ€μ… μ§€μ› μ—¬λ¶€ ν™•μΈ
    3. `write()`λ¥Ό νΈμ¶ν•μ—¬ HTTP μ‘λ‹µ λ©”μ‹μ§€ λ°”λ””μ— λ°μ΄ν„° μƒμ„±  

## 3. μ •λ¦¬

- `HttpMessageConverter`λ” μ¤ν”„λ§μ—μ„ HTTP μ”μ²­κ³Ό μ‘λ‹µμ λ©”μ‹μ§€λ¥Ό λ³€ν™ν•λ” μ—­ν• μ„ ν•λ” μΈν„°νμ΄μ¤μ΄λ‹¤.
- μ¤ν”„λ§μ—μ„λ” λ‹¤μ–‘ν• λ―Έλ””μ–΄ νƒ€μ…κ³Ό ν•μ‹μ„ μ§€μ›ν•κΈ° μ„ν•΄ μ—¬λ¬ μΆ…λ¥μ κµ¬ν„μ²΄λ¥Ό μ κ³µν•κ³  μλ‹¤.
- `ByteArrayHttpMessageConverter`, `StringHttpMessageConverter`, `MappingJackson2HttpMessageConverter`, `MappingJackson2XmlHttpMessageConverter` λ“±μ κµ¬ν„μ²΄κ°€ μμ£Ό μ‚¬μ©λλ‹¤.
- HttpMessgeConverter μ„ νƒμ€ μ”μ²­μ‹μ— Content-Type λ―Έλ””μ–΄νƒ€μ…κ³Ό λ€μƒν΄λμ¤ νƒ€μ…μ„ ν™•μΈν•κ³ , μ‘λ‹µμ‹μ—λ” Accept λ―Έλ””μ–΄ νƒ€μ…κ³Ό λ€μƒ ν΄λμ¤ νƒ€μ… ν™•μΈν•μ—¬ μ„ νƒν•λ‹¤.
